{
    "name": "PHP 8.3 & React Dev Environment for Buffet",
    "dockerComposeFile": ["../compose.yaml"],
    "service": "web",  // Specify the primary service where development will happen
    "workspaceFolder": "/var/www/html",
    "customizations": {
        "vscode": {
            "extensions": [
                "ritwickdey.LiveServer",
                "foxundermoon.shell-format",
                "ms-php.php-pack",         // PHP extensions for development
                "bmewburn.vscode-intelephense-client", // PHP IntelliSense
                "esbenp.prettier-vscode",  // Prettier for code formatting
                "dbaeumer.vscode-eslint",  // ESLint for JS/React
                "xabikos.javascriptsnippets" // JS/React snippets
            ],
            "settings": {
                "php.validate.executablePath": "/usr/local/bin/php", // Ensure PHP validation works
                "terminal.integrated.shell.linux": "/bin/bash"
            }
        }
    },
    "features": {
        "ghcr.io/devcontainers/features/node:1": {
            "version": "20"
        }
    },
    "forwardPorts": [
        80,
        3000
    ],
    "portsAttributes": {
        "80": {
            "label": "Apache",
            "onAutoForward": "notify"
        },
        "3000": {
            "label": "Vite App",
            "onAutoForward": "notify"
        }
    },
    "postCreateCommand": "composer install", // Run after container is built, if using Composer
    "postStartCommand": "sudo bash .devcontainer/start.sh i",
    "remoteUser": "www-data"  // Set the user to match your web server's user
  }